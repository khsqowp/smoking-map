# ğŸ“š API ë¬¸ì„œí™” ì˜ˆì‹œ - Smoking Map

## ğŸ¯ API ë¬¸ì„œí™”ë€?

í˜„ì¬ í”„ë¡œì íŠ¸ì˜ ëª¨ë“  REST APIë¥¼ **ìë™ìœ¼ë¡œ** ë¬¸ì„œí™”í•˜ì—¬ ëŒ€í™”í˜• ì›¹í˜ì´ì§€ë¡œ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

---

## ğŸ“‹ í˜„ì¬ API í˜„í™© (9ê°œ ì»¨íŠ¸ë¡¤ëŸ¬)

### 1. ğŸ“ **PlaceApiController** - ì¥ì†Œ ê´€ë¦¬
```http
POST   /api/v1/places                    # ì¥ì†Œ ë“±ë¡ (ì´ë¯¸ì§€ í¬í•¨)
GET    /api/v1/places                    # ì „ì²´ ì¥ì†Œ ì¡°íšŒ
GET    /api/v1/places/search             # ì¥ì†Œ ê²€ìƒ‰
GET    /api/v1/places/{id}               # ì¥ì†Œ ìƒì„¸ ì¡°íšŒ
POST   /api/v1/places/{id}/view          # ì¡°íšŒìˆ˜ ì¦ê°€
```

### 2. â­ **ReviewApiController** - ë¦¬ë·° ê´€ë¦¬  
```http
POST   /api/v1/reviews                   # ë¦¬ë·° ì‘ì„±
GET    /api/v1/places/{id}/reviews       # íŠ¹ì • ì¥ì†Œ ë¦¬ë·° ì¡°íšŒ
DELETE /api/v1/reviews/{id}              # ë¦¬ë·° ì‚­ì œ
```

### 3. ğŸ‘¤ **FavoriteApiController** - ì¦ê²¨ì°¾ê¸°
```http
POST   /api/v1/favorites                 # ì¦ê²¨ì°¾ê¸° ì¶”ê°€
GET    /api/v1/favorites                 # ë‚´ ì¦ê²¨ì°¾ê¸° ì¡°íšŒ
DELETE /api/v1/favorites/{id}            # ì¦ê²¨ì°¾ê¸° ì‚­ì œ
```

### 4. ğŸ“Š **AdminApiController** - ê´€ë¦¬ì ê¸°ëŠ¥
```http
GET    /api/v1/admin/dashboard           # ëŒ€ì‹œë³´ë“œ ë°ì´í„°
GET    /api/v1/admin/places              # ê´€ë¦¬ììš© ì¥ì†Œ ëª©ë¡
GET    /api/v1/admin/places/{id}         # ê´€ë¦¬ììš© ì¥ì†Œ ìƒì„¸
```

### 5. ğŸ“¢ **AnnouncementApiController** - ê³µì§€ì‚¬í•­
```http
GET    /api/v1/announcements            # ê³µì§€ì‚¬í•­ ì¡°íšŒ
POST   /api/v1/admin/announcements      # ê³µì§€ì‚¬í•­ ì‘ì„± (ê´€ë¦¬ì)
```

### 6. ğŸ”§ **EditRequestApiController** - ìˆ˜ì • ìš”ì²­
```http
POST   /api/v1/edit-requests            # ì¥ì†Œ ìˆ˜ì • ìš”ì²­
GET    /api/v1/admin/edit-requests      # ìˆ˜ì • ìš”ì²­ ê´€ë¦¬ (ê´€ë¦¬ì)
```

### 7. ğŸ“Š **UserActivityLogApiController** - ì‚¬ìš©ì í™œë™ ë¡œê·¸
```http
POST   /api/v1/activity-logs            # í™œë™ ë¡œê·¸ ê¸°ë¡
```

### 8. ğŸš¨ **ReportApiController** - ì‹ ê³  ê´€ë¦¬
```http
POST   /api/v1/reports                  # ì‹ ê³  ì ‘ìˆ˜
GET    /api/v1/admin/reports            # ì‹ ê³  ê´€ë¦¬ (ê´€ë¦¬ì)
```

### 9. ğŸ  **IndexController** - ë©”ì¸ í˜ì´ì§€
```http
GET    /                               # ë©”ì¸ í˜ì´ì§€
```

---

## ğŸ”§ Swagger ì ìš© í›„ ëª¨ìŠµ

### **1. ìë™ ìƒì„±ë˜ëŠ” API ë¬¸ì„œ ì›¹í˜ì´ì§€**
```
URL: http://localhost:8080/swagger-ui.html
```

### **2. ì‹¤ì œ í™”ë©´ ì˜ˆì‹œ**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ Smoking Map API Documentation v1.0          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  ğŸ“ place-api-controller                        â”‚
â”‚  â”œâ”€ POST /api/v1/places                        â”‚
â”‚  â”‚   â”œâ”€ ğŸ“ ì¥ì†Œë¥¼ ìƒˆë¡œ ë“±ë¡í•©ë‹ˆë‹¤                â”‚
â”‚  â”‚   â”œâ”€ ğŸ“¥ Parameters:                          â”‚
â”‚  â”‚   â”‚   â”œâ”€ requestDto: PlaceSaveRequestDto     â”‚
â”‚  â”‚   â”‚   â””â”€ images: MultipartFile[]             â”‚
â”‚  â”‚   â”œâ”€ ğŸ“¤ Response: Long                       â”‚
â”‚  â”‚   â””â”€ [ğŸ§ª Try it out] â† í´ë¦­í•˜ë©´ ë°”ë¡œ í…ŒìŠ¤íŠ¸!    â”‚
â”‚  â”‚                                              â”‚
â”‚  â”œâ”€ GET /api/v1/places                         â”‚
â”‚  â”‚   â”œâ”€ ğŸ“ ëª¨ë“  ì¥ì†Œ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤             â”‚
â”‚  â”‚   â”œâ”€ ğŸ“¤ Response: List<PlaceResponseDto>      â”‚
â”‚  â”‚   â””â”€ [ğŸ§ª Try it out]                        â”‚
â”‚  â”‚                                              â”‚
â”‚  â””â”€ GET /api/v1/places/search                  â”‚
â”‚      â”œâ”€ ğŸ“ í‚¤ì›Œë“œë¡œ ì¥ì†Œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤             â”‚
â”‚      â”œâ”€ ğŸ“¥ Parameters: keyword (string)         â”‚
â”‚      â””â”€ [ğŸ§ª Try it out]                        â”‚
â”‚                                                 â”‚
â”‚  â­ review-api-controller                       â”‚
â”‚  â”œâ”€ POST /api/v1/reviews                       â”‚
â”‚  â””â”€ GET /api/v1/places/{id}/reviews            â”‚
â”‚                                                 â”‚
â”‚  ğŸ‘¤ favorite-api-controller                     â”‚
â”‚  ğŸ“Š admin-api-controller                        â”‚
â”‚  ğŸ“¢ announcement-api-controller                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **3. "Try it out" ê¸°ëŠ¥**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POST /api/v1/places                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Parameters:                                    â”‚
â”‚                                                 â”‚
â”‚  requestDto: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚             â”‚ {                               â”‚ â”‚
â”‚             â”‚   "name": "ê°•ë‚¨ì—­ í¡ì—°êµ¬ì—­",      â”‚ â”‚
â”‚             â”‚   "address": "ì„œìš¸ ê°•ë‚¨êµ¬...",   â”‚ â”‚
â”‚             â”‚   "latitude": 37.498095,        â”‚ â”‚
â”‚             â”‚   "longitude": 127.02761        â”‚ â”‚
â”‚             â”‚ }                               â”‚ â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚  images: [íŒŒì¼ ì„ íƒ] [íŒŒì¼ ì„ íƒ]                  â”‚
â”‚                                                 â”‚
â”‚  [ğŸš€ Execute] â† í´ë¦­í•˜ë©´ ì‹¤ì œ API í˜¸ì¶œ!          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **4. ì‘ë‹µ ê²°ê³¼ ì‹¤ì‹œê°„ í‘œì‹œ**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¤ Response                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Code: 200 âœ…                                   â”‚
â”‚  Response body: 1234                            â”‚
â”‚                                                 â”‚
â”‚  ğŸ“‹ Response headers:                           â”‚
â”‚  content-type: application/json                 â”‚
â”‚  date: Thu, 19 Dec 2024 12:00:00 GMT          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ API ë¬¸ì„œí™”ì˜ ì¥ì 

### **ê°œë°œì ì¸¡ë©´**
- âœ… ëª¨ë“  APIë¥¼ í•œ ëˆˆì— íŒŒì•… ê°€ëŠ¥
- âœ… íŒŒë¼ë¯¸í„° í˜•ì‹ì„ ì¦‰ì‹œ í™•ì¸
- âœ… ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ API í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- âœ… Postman ì—†ì´ë„ ê°œë°œ ê°€ëŠ¥

### **íŒ€ í˜‘ì—… ì¸¡ë©´**  
- âœ… í”„ë¡ íŠ¸ì—”ë“œ â†” ë°±ì—”ë“œ ì†Œí†µ ì›í™œ
- âœ… ì‹ ì… ê°œë°œì ì˜¨ë³´ë”© ì‹œê°„ ë‹¨ì¶•
- âœ… API ë³€ê²½ì‚¬í•­ ìë™ ë°˜ì˜
- âœ… ì™¸ë¶€ ê°œë°œìì™€ì˜ í˜‘ì—… ìš©ì´

### **ìš´ì˜ ì¸¡ë©´**
- âœ… API ìŠ¤í™ ë¬¸ì„œ ë³„ë„ ê´€ë¦¬ ë¶ˆí•„ìš”
- âœ… ë²„ì „ ê´€ë¦¬ ìë™í™”
- âœ… í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶• ì‹œê°„ ë‹¨ì¶•

---

## ğŸ”§ êµ¬í˜„ ë°©ë²•

### **1. build.gradleì— ì˜ì¡´ì„± ì¶”ê°€**
```gradle
dependencies {
    // Swagger 3 (OpenAPI 3)
    implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.2.0'
}
```

### **2. Configuration í´ë˜ìŠ¤ ìƒì„±**
```java
@Configuration
public class SwaggerConfig {
    
    @Bean
    public OpenAPI smokingMapAPI() {
        return new OpenAPI()
            .info(new Info()
                .title("Smoking Map API")
                .version("v1.0")
                .description("í¡ì—° ì§€ë„ ì„œë¹„ìŠ¤ API ë¬¸ì„œ"));
    }
}
```

### **3. ì»¨íŠ¸ë¡¤ëŸ¬ì— ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€**
```java
@RestController
@Tag(name = "ì¥ì†Œ API", description = "í¡ì—° ì¥ì†Œ ê´€ë ¨ API")
public class PlaceApiController {

    @Operation(summary = "ì¥ì†Œ ë“±ë¡", description = "ìƒˆë¡œìš´ í¡ì—° ì¥ì†Œë¥¼ ë“±ë¡í•©ë‹ˆë‹¤")
    @ApiResponse(responseCode = "200", description = "ë“±ë¡ ì„±ê³µ")
    @PostMapping("/api/v1/places")
    public ResponseEntity<Long> save(
        @Parameter(description = "ì¥ì†Œ ì •ë³´") @RequestPart PlaceSaveRequestDto requestDto,
        @Parameter(description = "ì¥ì†Œ ì´ë¯¸ì§€ë“¤") @RequestPart List<MultipartFile> images
    ) {
        // êµ¬í˜„...
    }
}
```

### **4. ì ‘ì† URL**
```
ê°œë°œ í™˜ê²½: http://localhost:8080/swagger-ui.html
ìš´ì˜ í™˜ê²½: https://smokingmap.duckdns.org/swagger-ui.html
```

---

## ğŸ“Š í˜„ì¬ í”„ë¡œì íŠ¸ ì ìš© ì‹œ ì˜ˆìƒ ê²°ê³¼

### **ë¬¸ì„œí™”ë  API ìˆ˜**
- ì´ **9ê°œ ì»¨íŠ¸ë¡¤ëŸ¬**
- ì•½ **30+ ê°œì˜ ì—”ë“œí¬ì¸íŠ¸**
- ëª¨ë“  DTO í´ë˜ìŠ¤ ìë™ ë¬¸ì„œí™”

### **ì‹œê°„ ì ˆì•½ íš¨ê³¼**
- API ìŠ¤í™ ë¬¸ì„œ ì‘ì„± ì‹œê°„: **0ì‹œê°„** (ìë™ ìƒì„±)
- í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì API íŒŒì•… ì‹œê°„: **90% ë‹¨ì¶•**  
- ì‹ ê·œ ê°œë°œì ì˜¨ë³´ë”© ì‹œê°„: **50% ë‹¨ì¶•**

### **ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ**
```
ìƒí™©: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì¥ì†Œ ê²€ìƒ‰ API ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ

Before (ë¬¸ì„œí™” ì „):
1. ë°±ì—”ë“œ ì½”ë“œ ë’¤ì ¸ì„œ ì—”ë“œí¬ì¸íŠ¸ ì°¾ê¸° (10ë¶„)
2. DTO í´ë˜ìŠ¤ ì°¾ì•„ì„œ íŒŒë¼ë¯¸í„° í™•ì¸ (5ë¶„)  
3. Postmanìœ¼ë¡œ í…ŒìŠ¤íŠ¸ (5ë¶„)
4. í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì‘ì„± (10ë¶„)
â†’ ì´ 30ë¶„

After (ë¬¸ì„œí™” í›„):
1. Swagger í˜ì´ì§€ ì ‘ì† (10ì´ˆ)
2. ê²€ìƒ‰ API í´ë¦­í•´ì„œ ìŠ¤í™ í™•ì¸ (30ì´ˆ)
3. "Try it out"ìœ¼ë¡œ ë°”ë¡œ í…ŒìŠ¤íŠ¸ (1ë¶„)
4. í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ì‘ì„± (5ë¶„)  
â†’ ì´ 7ë¶„ (76% ì‹œê°„ ë‹¨ì¶•!)
```

ì´ê²ƒì´ ë°”ë¡œ **API ë¬¸ì„œí™”**ì˜ í•µì‹¬ì…ë‹ˆë‹¤! ğŸ¯